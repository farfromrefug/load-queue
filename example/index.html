<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Load queue example</title>
    <script src="../dist/load-queue.min.js" type="text/javascript"></script>
</head>
<body>

<h1>Load queue example</h1>
<div id="log"></div>
<script>
    var log = document.getElementById('log')

    function write (text) {
        log.innerHTML += text + '<br/>'
    }
    // The custom loader task that will accept entry object (QueryEntry)
    var loaderTask = function (entry, success, failure) {
        write('Loading ' + entry.url)
        setTimeout(function () {
            if (entry.url === 'url1') {
                failure(new Error('Failed!'))
            } else {
                success('my custom var', 'custom var 2')
            }
        }, 1000)
    }

    // Build the queue
    var queue = new LoadQueue.default(loaderTask)
    for (var i = 0; i < 20; i++) {
        queue.add('url' + i, function (url, customVar, customVar1) {
            write('Loaded ' + url + ', vars: ' + customVar + ', ' + customVar1)
        }, function (url, error) {
            write('Error ' + url + ' - ' + error.message)
        })
    }
</script>
</body>
</html>
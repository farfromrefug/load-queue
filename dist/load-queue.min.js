!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("LoadQueue",[],e):"object"==typeof exports?exports.LoadQueue=e():t.LoadQueue=e()}(this,function(){return function(t){function e(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return t[u].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,u){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:u})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=6)}([function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=u(o),s=n(5),a=u(s),c=function t(e){var n=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r(this,t),this.add=function(t,e,u){var r=new i.default(t,e,u,n);return n.core.add(r).start(),r},this.cancel=function(t){var e=t;t instanceof i.default&&(e=t.url),n.core.cancel(e)&&n.core.start()},this.core=new a.default(e,u,o)};e.default=c},function(t,e,n){"use strict";function u(t,e){for(var n=0;n<t.length;n++)e(t[n])}function r(t,e,n,r){var o=this;this.callbacks={success:[e],error:[n]},this.url=t,this.success=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];u(o.callbacks.success,function(e){e.apply(void 0,[t].concat(n))})},this.error=function(e){u(o.callbacks.success,function(n){n(t,e)})},this.cancel=function(){r.cancel(o)},this.task=null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,u=new i.default(t,e,n),r={};u.core.onEntrySuccess=function(t,e){r[t.url]=e},this.add=function(t,e,n){var o=r[t];if(void 0===o)return u.add(t,e,n);var i=new a.default(t,e,n,u);return i.success(o),i},this.cancel=function(t){u.cancel(t)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=u(o),s=n(1),a=u(s);e.default=r},function(t,e,n){"use strict";function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,u=new o.default(t,e,n);this.add=u.add,this.cancel=u.cancel}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=u},function(t,e,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}(),i=function(){function t(){u(this,t),this.list={}}return o(t,[{key:"get",value:function(t){return this.list[t]}},{key:"has",value:function(t){var e=this.get(t);return"object"===(void 0===e?"undefined":r(e))}},{key:"length",value:function(){return this.keys().length}},{key:"keys",value:function(){return Object.keys(this.list)}},{key:"shift",value:function(){var t=this.keys();return 0===t.length?null:this.pull(t[0])}},{key:"pull",value:function(t){var e=this.get(t);return"object"===(void 0===e?"undefined":r(e))?(this.remove(t),e):null}},{key:"push",value:function(t){return this.list[t.url]=t,this}},{key:"remove",value:function(t){return delete this.list[t],this}}]),t}();e.default=i},function(t,e,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!1===t.has(e)}function o(t,e){if(!1===t.has(e.url))return!1;var n=t.get(e.url);return n.callbacks.error.push(e.callbacks.error[0]),n.callbacks.success.push(e.callbacks.success[0]),e.task=n.task,!0}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}(),s=n(4),a=function(t){return t&&t.__esModule?t:{default:t}}(s),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;u(this,t),this.concurrentJobs=n,this.queue=new a.default,this.loading=new a.default,this.LoadTaskClass=e,this.onEntrySuccess=null,this.onEntryError=null,this.startTimeoutTime=void 0===r?50:r,this.startTimeout=null}return i(t,[{key:"add",value:function(t){return o(this.loading,t)?this:(!1===o(this.queue,t)&&this.queue.push(t),this)}},{key:"start",value:function(){var t=this;return!(this.loading.length()>=this.concurrentJobs)&&(null!==this.startTimeout&&clearTimeout(this.startTimeout),null===this.startTimeoutTime?this.forceStart():void(this.startTimeout=setTimeout(function(){t.forceStart()},this.startTimeoutTime)))}},{key:"forceStart",value:function(){var t=this,e=this.queue.shift();if(null===e)return!1;this.loading.push(e);var n=e.url,u=this.LoadTaskClass;return e.task=new u(e,function(){for(var u=arguments.length,o=Array(u),i=0;i<u;i++)o[i]=arguments[i];r(t.loading,n)||(e.success.apply(e,o),t.loading.remove(n),t.start(),null!==t.onEntrySuccess&&t.onEntrySuccess(e,o))},function(u){r(t.loading,n)||(e.error(u),t.loading.remove(n),t.start(),null!==t.onEntryError&&t.onEntryError(e,u))}),!0}},{key:"cancel",value:function(t){if(this.queue.remove(t),this.loading.has(t)){var e=this.loading.pull(t);return null!==e.task&&"function"==typeof e.task.cancel&&e.task.cancel(),!0}return!1}}]),t}();e.default=c},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.CachedQueue=e.Queue=void 0;var r=n(3),o=u(r),i=n(2),s=u(i);e.Queue=o.default,e.CachedQueue=s.default,e.default=o.default}])});
//# sourceMappingURL=load-queue.min.js.map